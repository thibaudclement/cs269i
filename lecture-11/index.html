
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../guest-lecture-kshipra-bhawalkar/">
      
      
        <link rel="next" href="../lecture-12/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Proof-of-Work Blockchains - Stanford CS269I Course Notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cryptographic-preliminaries" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Stanford CS269I Course Notes" class="md-header__button md-logo" aria-label="Stanford CS269I Course Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stanford CS269I Course Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Proof-of-Work Blockchains
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Stanford CS269I Course Notes" class="md-nav__button md-logo" aria-label="Stanford CS269I Course Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Stanford CS269I Course Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    One-Sided Matching and Serial Dictatorship
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stable Two-Sided Matchings
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Learning and Regret Minimization
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-3-2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top Trading Cycles
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Equilibria in Games
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P File-sharing Dilemma
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Equilibrium
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Failures
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auctions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prediction Markets and Information Cascades
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-9.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mid-Quarter Review Party
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guest-lecture-eric-neyman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Train an AI That Doesn't Lie
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scoring Rules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guest-lecture-kshipra-bhawalkar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Incentives in Sponsored Search Auctions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Proof-of-Work Blockchains
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Proof-of-Work Blockchains
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cryptographic-preliminaries" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptographic Preliminaries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decentralized-permissionless-crypto-money" class="md-nav__link">
    <span class="md-ellipsis">
      Decentralized, Permissionless Crypto-Money
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-bitcoin-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      The Bitcoin Protocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issues-with-big-miners" class="md-nav__link">
    <span class="md-ellipsis">
      Issues With Big Miners
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#big-miners-in-practice" class="md-nav__link">
    <span class="md-ellipsis">
      Big Miners in Practice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proof-of-Stake Blockchains
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Markets
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envy and Fairness
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guest-lecture-geoff-ramseyer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Incentive (Mis)alignment in Blockchain Exchanges
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture-15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Allocation + End-of-Quarter Party
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cryptographic-preliminaries" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptographic Preliminaries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decentralized-permissionless-crypto-money" class="md-nav__link">
    <span class="md-ellipsis">
      Decentralized, Permissionless Crypto-Money
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-bitcoin-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      The Bitcoin Protocol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issues-with-big-miners" class="md-nav__link">
    <span class="md-ellipsis">
      Issues With Big Miners
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#big-miners-in-practice" class="md-nav__link">
    <span class="md-ellipsis">
      Big Miners in Practice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Proof-of-Work Blockchains</h1>

<p><em>May 14, 2025</em></p>
<div class="remark">
<p><strong>Note:</strong> The goal of this lecture is <strong><em>not</em></strong> to offer investment advice.</p>
</div>
<h2 id="cryptographic-preliminaries">Cryptographic Preliminaries</h2>
<p>Today, we will need some very minimal crytography concepts (primitives).</p>
<div class="definition">
<p><strong>Definition: Digital Signatures <span class="arithmatex">\((public \_ key, secret \_ key)\)</span></strong></p>
<p>To show that I agree with statement <span class="arithmatex">\(x\)</span>, I can <span class="arithmatex">\(y \leftarrow sign(x, secret \_ key)\)</span>.
Anyone who has my <span class="arithmatex">\(public \_ key\)</span> can <span class="arithmatex">\(verify(x, y, public \_ key)\)</span> to make sure it was really me who signed <span class="arithmatex">\(x\)</span>.</p>
<p>(Formally: Whoever signed <span class="arithmatex">\(x\)</span> had <span class="arithmatex">\(secret \_ key\)</span>).</p>
</div>
<div class="definition">
<p><strong>Definition: Cryptographic Hash Function <span class="arithmatex">\(H\)</span></strong></p>
<ul>
<li>Given <span class="arithmatex">\(a\)</span>, it is easy to compute <span class="arithmatex">\(H(a) = b\)</span>.</li>
<li>Given <span class="arithmatex">\(b\)</span>, the fastest way to find <span class="arithmatex">\(a\)</span> is by trying every/random inputs.<ul>
<li>Even if you know some bits of <span class="arithmatex">\(a\)</span>, the only way to find the missing bits is by trying every combination.</li>
<li>If you want something that agrees with <span class="arithmatex">\(b\)</span> on the first <span class="arithmatex">\(k\)</span> bits, you need <span class="arithmatex">\(2k\)</span> tries in expectation. (Aka random is still the fastest way.)</li>
</ul>
</li>
</ul>
</div>
<h2 id="decentralized-permissionless-crypto-money">Decentralized, Permissionless Crypto-Money</h2>
<div class="remark">
<p>Per the lecture slides: "This is intended to be a slow introduction for those of you who have never seen blockchains."</p>
</div>
<div class="example">
<p><strong>Example:</strong> Alice pays Bob <span class="arithmatex">\(\$1\)</span>.</p>
<p>With a wire transfer from her bank account:</p>
<ul>
<li>Alice‚Äôs bank verifies that she has <span class="arithmatex">\(\$1\)</span> in her account.</li>
<li>After the transfer, the bank <span class="arithmatex">\(-\$1\)</span> off her account.</li>
</ul>
<p>Do we really need a bank for that? In particular, without a bank, how can we be sure that Alice ever had <span class="arithmatex">\(\$1\)</span>?</p>
<ul>
<li>
<p>Alice can tell Bob the entire history of her <span class="arithmatex">\(\$1\)</span>:</p>
<blockquote>
<p>‚Äú<span class="arithmatex">\(\$1\)</span> was minted, then paid to <span class="arithmatex">\(02847\)</span>, who paid it to <span class="arithmatex">\(42975\)</span>, who paid me‚Äù</p>
</blockquote>
</li>
<li>
<p>Alice can use cryptographic proofs (digital signatures) to show that this story is true.</p>
</li>
</ul>
<p>How can we be sure that Alice hasn‚Äôt already spent this <span class="arithmatex">\(\$1\)</span>?</p>
<p><strong>Key point:</strong> It is much easier to prove that something happened than didn‚Äôt happen!</p>
<p>So, the way to solve this is that, when Alice spends money, she tells the whole world about it. Next time she spends money, we can check the entire history of payments, and make sure Alice didn‚Äôt already spend this money.</p>
</div>
<p>This brings us to the concept of a ledger.</p>
<div class="definition">
<p><strong>Definition: Ledger</strong></p>
<p>An ordered history of transactions.</p>
</div>
<p>Why do we need a ledger? So that when Alice pays Bob <span class="arithmatex">\(\$1\)</span>, we can verify that she hasn‚Äôt already paid the same <span class="arithmatex">\(\$1\)</span> to someone else.</p>
<div class="definition">
<p><strong>Desiderata: Decentralized Ledger</strong></p>
<p>The ideal ledger meets the following requirements:</p>
<ul>
<li><strong>Decentralized:</strong> Not controlled by any single entity (it continues to work even if a bank is hacked, no entity can halt trades, e.g., when Citadel asked Robin Hood to halt trades of GameStop stocks).</li>
<li><strong>Consensus:</strong> Either everyone believes that Alice payd Bob, or everyone believes that she didn‚Äôt.</li>
<li><strong>Permissionless:</strong> Anyone can join (or leave) at any time<ul>
<li>This is a major source of technical difficulty (for instance due to adversarial participants trying to hack the system).</li>
<li>What are the motivations? Extreme decentralization, and permissionless success stories (content on the Internet, i.e. Wikipedia, YouTube, FB).</li>
</ul>
</li>
</ul>
</div>
<p>In a permissionless system, a ‚Äúmajority of the users‚Äù is meaningless, because I can always create more copies of myself (i.e. launch a Sybil attack). Some alternatives that are harder to copy in a digital world include:</p>
<ul>
<li>Proof-of-Work: ‚Äú1 CPU = 1 vote‚Äù</li>
<li>Proof-of-Stake: ‚Äú1 coin = 1 vote‚Äù</li>
<li>Proof-of-Space: ‚Äú1 bit (storage) = 1 vote‚Äù</li>
</ul>
<p><em><strong>Note:</strong> There is a lot of research going on into how to come up with a "Proof-of-Humanity."</em></p>
<h2 id="the-bitcoin-protocol">The Bitcoin Protocol</h2>
<div class="definition">
<p><strong>Definition: Blocks</strong></p>
<p>The ledger is constructed as a chain of blocks (aka a blockchain!).</p>
<p>Each block contains:</p>
<ul>
<li>Some (digitally-signed) payments/transactions,</li>
<li>A (cryptographic) hash of the previous block,</li>
<li>A nonce (for now, we consider this to be just a padding string‚Äìmore coming soon).</li>
</ul>
</div>
<p><strong>Question: If the blockchain is decentralized, who owns the storage?</strong></p>
<p>Everyone who participates keeps a copy of the blockchain on their own machine, i.e. everyone who participates needs to have enough space to keep track of everything that ever happened in the history of the blockchain.</p>
<div class="example">
<p><strong>Example: Blockchain</strong></p>
<p><img alt="Blockchain example" src="../images/Blockchain%20example.png" /></p>
<p>In order to verify the <span class="arithmatex">\((Alice \rightarrow Bob, \$1)\)</span> payment in block <span class="arithmatex">\(b_t\)</span>:</p>
<ul>
<li>Verify that Alice signed the payment (using <code>Alice.public_key</code>),</li>
<li>Verify that Alice received this $1 in some previous block,</li>
<li>Verify that Alice hasn‚Äôt spent it.</li>
</ul>
<p>In order to verify block <span class="arithmatex">\(b_t\)</span>:</p>
<ul>
<li>Verify all the transactions,</li>
<li>Verify that it correctly hashes block <span class="arithmatex">\(b_t - 1\)</span>,</li>
<li>Verify the nonce (see below).</li>
</ul>
</div>
<div class="definition">
<p><strong>Definition: Proof-of-Work (PoW)</strong></p>
<p>A nonce is valid if the hash of the entire new block (including all payments, the hash of previous block, and the nonce) has <span class="arithmatex">\(k\)</span> leading zeros.</p>
<p>The probability to find to find a valid nonce is: <span class="arithmatex">\(Pr[valid \; nonce] = \frac{Number \; of \; hashes \; tried}{2^k}\)</span>.</p>
<p><strong>Proof-of-Work:</strong> If you find a valid nonce, it proves that you tried a lot of hashes and got lucky.</p>
<p>Miners compete to find the first valid nonce and create (mine) the new block. The winner gets a reward (encoded as a transaction in the new block). <span class="arithmatex">\(k\)</span> is adjusted dynamically, so that it takes all the miners in the world about <span class="arithmatex">\(10\)</span>
minutes in expectation to find the next valid nonce.</p>
</div>
<p>When Alice wants to pay Bob, she sends the signed transaction to all miners.
Then Alice (and Bob) wait for a miner to include this transaction in a new block.</p>
<p><strong>Question: What does Proof-of-Work actually offer?</strong></p>
<p>You always want to create a new block because you get a reward (a lot of money) for creating that block. The point of PoW is to show that the miner who wins tried really hard to find the nonce. Why do we want them to try really hard? Because without the PoW, miners could just write a million new blocks.</p>
<p>We want to have a sense of majority, that people agree that we have consensus. Pointing to a block means that we agree with the content of that block, and finding a valid nonce is a puzzle that slows you down.</p>
<p>In the case of a digital world record, a ‚Äúmajority of people‚Äù does not make sense (because people can duplicate themselves to have an outsize influence), so instead, we ask for a majority of compute power, i.e. a majority of hash rate. So, when a majority of compute belongs to people who agree with a block, they will point to something that extends that block.</p>
<p><strong>Question: If it takes 10 minutes to write a new block, and there are a million transactions that need to be verified in that time, how is there enough block to validate them?</strong></p>
<p>Bitcoin has a severe limitation of the rate of transactions it can process. So, will Bitcoin ever replace credit cards? No, because Visa can process so many millions of transactions per second, while Bitcoin can only have so many bytes per block to include transactions. Other protocols are working really hard to scale a process that can process a lot more transactions.</p>
<p><em><strong>Note:</strong></em></p>
<ul>
<li><em>The <strong>mempool</strong> is essentially¬†a temporary storage area for unconfirmed transactions on the Bitcoin blockchain network. When a user initiates a cryptocurrency transaction, such as sending bitcoin to another user, the transaction is broadcast to the network and temporarily held in the mempool.</em></li>
<li><em>To get into the mempool, you need to make sure that a transaction is digitally signed correctly. Maybe Alice wants to pay Bob and wants to pay Charlie, but she has only <span class="arithmatex">\(\$1\)</span>, so each of those transactions individually is valid, and they can both go into the mempool, but which one is going to go into the block is something that the miner chooses.</em></li>
</ul>
<div class="definition">
<p><strong>Definition: Fork</strong></p>
<p>Occasionally, two miners find valid nonces at (essentially) the same time. They create two different blocks, so we no longer have consensus. This is a fork.</p>
<p><img alt="Blockchain fork" src="../images/Blockchain%20fork.png" /></p>
</div>
<div class="definition">
<p><strong>Definition: Longest Chain Rule</strong></p>
<p><img alt="Longest Chain Rule" src="../images/Longest%20Chain%20Rule.png" /></p>
<p>Miners have a protocol for deciding which branch the next block should extend (hash), i.e. <span class="arithmatex">\(b_t\)</span> or <span class="arithmatex">\(\hat b_t\)</span>. Famously, they should try to extend the longest-chain available, i.e. above they should prioritize <span class="arithmatex">\(b_{t+1}\)</span> or <span class="arithmatex">\(\hat b_t\)</span>.</p>
</div>
<p><strong>Question: What happens if two miners find a valid nonce at the same time?</strong></p>
<p>Branches are called forks, they happen sometimes, potentially due to a network delay (so the two miners do not hear about each other), and they are a headache, because we want to be in consensus, with everyone agreeing.</p>
<p><strong>Question: How do you recover from a fork?</strong></p>
<p>By taking the longest chain, this is the longest chain rule, so we take the branch of the fork that has the longest chain.</p>
<p><strong>Question: What happens to all the transactions in the branch that is not chosen?</strong></p>
<p>It is like they never happened.</p>
<p><strong>Question: What if you pay someone, they give you a new Tesla, and then the block goes out?</strong></p>
<p>Usually, we wait some time, such as 6 blocks in Bitcoin (this is a rule of thumb), which is about an hour, since we create one block every 10 minutes, and then it is very unlikely that someone has a different view of the chain.</p>
<p><strong>Question: Why are people incentivized the extend the longest chain?</strong></p>
<p>Because if everyone else is extending the longest chain, they are more likely to agree with you. If you mine a block and it does not extend the longest chain, then you do not get the reward for the miner.</p>
<p><strong>Question: What if there are two equal length chains?</strong></p>
<p>The rule says that you should extend whichever one you heard of first. Probably there is a tie for one or two blocks, but after a while, there will be a block that everyone sees and wants to extend.</p>
<p><strong>Question: What if miners are just wrong and do not verify transactions correctly?</strong></p>
<p>Then, you won‚Äôt extend their block, and they are going to lose a lot of money, so there is some kind of equilibrium where they want to run the same algorithm as everyone else.</p>
<div class="summary">
<p><strong>Attack Recap</strong></p>
<p>The blockchain is secure against the following attacks:</p>
<ul>
<li>Steal money attack: Nobody can create a payment from my account without the account‚Äôs <code>secret_key</code>.</li>
<li>Double-spend attack: Alice can‚Äôt send the same <span class="arithmatex">\(\$1\)</span> to both Bob and Charlie because a transaction is added to the ledger only after it is verified with respect to entire history of transactions.</li>
<li>Sybil attack: No one miner can take control by creating many accounts‚Äìa majority of compute power is necessary.</li>
</ul>
</div>
<h2 id="issues-with-big-miners">Issues With Big Miners</h2>
<p>When Bitcoin started in the 2000‚Äôs, everyone had a computer in their home, so each individual miner could represent a fraction of the total computer of the network. Hence the original utopic idea of increasingly distributing compute power to "the people."</p>
<p>Since then, it has been less and less of that, partially because a lot of computers have moved to the cloud, so it is still decentralized, but most miners are on AWS (if AWS goes down, the blockchain collapses).</p>
<p>In addition, solving hash functions is hard, but we can create special hardware that is really energy efficient to reduce the electricity you need to try all the nonces. So, professional miners makes it less worth it to run on your own computer, because you would not cover your electricity bill.</p>
<p>Some miners also own a power plant, or operate in a country where electricity is cheap.</p>
<p>All of this makes blockchains less and less decentralized. But the really big thing that happened is something called mining pools.</p>
<div class="definition">
<p><strong>Definition: Mining Pool</strong></p>
<p>Professional miners organize together to reduce variance in gains from mining rewards (and also to influence crypto-politics).</p>
</div>
<p>A mining pool is like an organization that pools a bunch of miners together.
Since there is only a new block every 10 minutes, you can go years without mining a new block, spending all this money, so it is not a safe investment. Therefore, miners started to get together in pools, and some of those pools are very large.</p>
<div class="example">
<p><strong>Examples: Mining Pools</strong></p>
<p>According to <a href="https://www.blockchain.com/explorer/charts/pools">blockchain.info/pools</a>:</p>
<ul>
<li>In 2021, the biggest four pools represented half of Bitcoin:</li>
</ul>
<p><img alt="Big miners 2021" src="../images/Big%20miners%202021.png" /></p>
<ul>
<li>In 2024, the biggest two pools represented half of Bitcoin:</li>
</ul>
<p><img alt="Big miners 2024" src="../images/Big%20miners%202024.png" /></p>
</div>
<div class="example">
<p><strong>Example: 51%-Attack</strong></p>
<p>If Alice has over 51% of all mining resources (hashrate), she can pay Bob, write it in the blockchain, and then fork a new chain suffix that doesn‚Äôt include that block.</p>
<p><img alt="51 percent attack" src="../images/51%20percent%20attack.png" /></p>
<p>More generally:</p>
<p><img alt="51 percent attack general" src="../images/51%20percent%20attack%20general.png" /></p>
</div>
<div class="example">
<p><strong>Example: Double-Spend Attack <em>without</em> 51% of Hashrate</strong></p>
<p>Imagine that Alice has <span class="arithmatex">\(\alpha &lt; 0.5\)</span> of the hashrate. She can still try to do the double-spend attack, and hope she gets lucky:</p>
<p><img alt="Double spend without 51 percent" src="../images/Double%20spend%20without%2051%20percent.png" /></p>
<p>In practice, it is recommended that Bob waits <span class="arithmatex">\(d &gt; 1\)</span> blocks before accepting a payment.</p>
<p>The attack succeeds if Alice mines <span class="arithmatex">\(d+1\)</span> blocks without the payment to Bob before anyone else can mine 1 block extending <span class="arithmatex">\(d\)</span> blocks with the payment to Bob.</p>
<p>Thus: <span class="arithmatex">\(Pr‚Å°["Attack \; succeeds" ] = \alpha^{(ùíÖ+ùüè)}\)</span></p>
</div>
<h2 id="big-miners-in-practice">Big Miners in Practice</h2>
<p>In 2014, the GHash.io mining pool exceeded 51% of the Bitcoin hashrate. Instead of executing a 51% attack, they encouraged miners to leave the pool. Why? In order to prevent (actually to stop) a drop in the value of Bitcoin.</p>
<p>For smaller coins (with a lower total hashrate), this is a bigger issue. If there is a lower barrier to reach 51% of the hashrate, and attackers do not care about a drop in value of a small coin, they can divert a lot of mining power for a short time period. Allegedly, 51% attacks happened (multiple times) to ‚ÄúEthereum Classic.‚Äù</p>
<h2 id="recap">Recap</h2>
<div class="summary">
<p><strong>Blockchain:</strong></p>
<ul>
<li>The <strong>ledger</strong> stores all transactions to prevent <strong>double-spending</strong>.</li>
<li>It is implemented as a <strong>chain</strong> of <strong>blocks</strong> created by <strong>miners</strong>.</li>
<li>Miners need <strong>Proof-of-Work</strong> to write blocks to avoid <strong>Sybil attacks</strong>.</li>
<li>The <strong>ongest chain rule</strong> disambiguates inconsistent blocks (<strong>forks</strong>).</li>
</ul>
<p><img alt="Longest Chain Rule" src="../images/Longest%20Chain%20Rule.png" /></p>
<p><strong>Big Miners</strong></p>
<ul>
<li>The original, decentralized utopian vision contrasts with the current, concentrated power of mining pools.</li>
<li>Causes for this change include specialized hardware, electricity costs, cloud computing, and reward variance.</li>
<li>Mining pools are groups of miners organizing together to pool revenue.</li>
<li>Attacks only require a large hashrate for some period of time.</li>
</ul>
<p><strong>Attacks</strong></p>
<ul>
<li>A <strong>51%-attack</strong> allows double spending, and freezing accounts, but not stealing money.</li>
<li>An <span class="arithmatex">\(\alpha\)</span>-fraction <strong>double-spend</strong> attack succeeds with probability (\alpha^{k+1}.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>
      
        <script src="../javascript/katex-init.js"></script>
      
    
  </body>
</html>