
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="../lecture2/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>One-Sided Matching and Serial Dictatorship - Stanford CS269I Course Notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#one-sided-matching-and-serial-dictatorship" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Stanford CS269I Course Notes" class="md-header__button md-logo" aria-label="Stanford CS269I Course Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stanford CS269I Course Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              One-Sided Matching and Serial Dictatorship
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Stanford CS269I Course Notes" class="md-nav__button md-logo" aria-label="Stanford CS269I Course Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Stanford CS269I Course Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    One-Sided Matching and Serial Dictatorship
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    One-Sided Matching and Serial Dictatorship
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#max-weight-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Max Weight Matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-dictatorship" class="md-nav__link">
    <span class="md-ellipsis">
      Serial Dictatorship
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stable Two-Sided Matchings
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Learning and Regret Minimization
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture3b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top Trading Cycles
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Equilibria in Games
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P File-sharing Dilemma
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Equilibrium
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Failures
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auctions
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#max-weight-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Max Weight Matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-dictatorship" class="md-nav__link">
    <span class="md-ellipsis">
      Serial Dictatorship
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="one-sided-matching-and-serial-dictatorship">One-Sided Matching and Serial Dictatorship</h1>
<p><em>March 31, 2025</em></p>
<p><strong>The Stanford Undergrad Housing Problem:</strong></p>
<ul>
<li>There are <span class="arithmatex">\( n \)</span> students, each with some preference over dorms.</li>
<li>There are <span class="arithmatex">\( m \)</span> dorms, each with some capacity (for simplicity, assume capacity is 1 for every dorm).</li>
</ul>
<p>How can we assign students to dorms?</p>
<h2 id="max-weight-matching">Max Weight Matching</h2>
<p>One possible solution is to maximize total happiness:</p>
<div class="definition">
<p><strong>Mechanism: Happiness Maximization</strong></p>
<ol>
<li>Create a bipartite graph where:<ul>
<li>One side represents students.</li>
<li>The other side represents dorms.</li>
<li>Each edge from a student to a dorm represents how much that student likes that dorm.</li>
</ul>
</li>
<li>Determine the max-weight matching (i.e., Hungarian Algorithm).</li>
</ol>
</div>
<p><strong>Key question:</strong> How does the algorithm determine how much each student likes each residency? Only the students themselves know how much they like each dorm, so we need to rely on students to tell the algorithm.</p>
<p><strong>Challenge:</strong> Each student has an <em>incentive</em> to exaggerate how much they like their favorite dorm and undercut how much they like other dorms (using a "0" or "negative infinity" weight for those dorms). In other words: max-weight bipartite matching allows students to game the system.</p>
<p>This occurs because finding the matching that maximizes total happiness is conceptually right, but this naive max-weight matching fails to take incentives into account. Another possible algorithm is Serial Dictatorship.</p>
<h2 id="serial-dictatorship">Serial Dictatorship</h2>
<p>This is how Stanford actually assigns dorms to students.</p>
<div class="definition">
<p><strong>Mechanism: Serial Dictatorship</strong></p>
<ol>
<li>Sort students in some fixed order (random, seniority, alphabetically, etc.).</li>
<li>Go through the list in <em>that</em> order and allow each student (the "dictator") to select their most preferred available dorm.</li>
</ol>
</div>
<p>How is this better? There can still be students unhappy with their result. Indeed, a common complaint about Serial Dictatorship is unfairness: the first student chooses whichever dorm they want, while the last student gets only the last pick.</p>
<p>When sorting is random, Serial Dictatorship guarantees <strong>ex-ante fairness</strong>: <em>before</em> the random sorting, all students have equal chances. However, <em>after</em> the sorting happens (even randomly), Serial Dictatorship loses fairness: there's no guarantee of <strong>ex-post fairness</strong>.</p>
<div class="definition">
<p><strong>Definition: Mechanism</strong></p>
<p>A mechanism consists of three things:</p>
<ol>
<li>A method of collecting inputs from agents,</li>
<li>An algorithm that acts on the inputs,</li>
<li>An action taken based on the output of the algorithm.</li>
</ol>
</div>
<p>In our context (Stanford Undergrad Housing Problem), based on inputs (dorm preferences) and the algorithm (available dorm after each student's pick), the mechanism takes actions (it assigns dorms).</p>
<p><strong>Note:</strong> All three components matter because there's a feedback loop: how we use inputs impacts what students report as preferences. The naive bipartite matching approach encourages students to game the system by misreporting their preferences.</p>
<p>Thus, when designing a mechanism, we must consider:</p>
<ul>
<li>The algorithm itself,</li>
<li>How/where inputs come from,</li>
<li>Actions taken based on inputs,</li>
<li>How promised actions affect reported inputs.</li>
</ul>
<div class="definition">
<p><strong>Definition: Strategyproofness/Truthfulness</strong></p>
<p>A mechanism is strategyproof if it's in every agent's best interest to act truthfully, i.e., to report true preferences.</p>
</div>
<p>Even more formally, game theorists somtimes use the term <strong>Dominant Strategy Incentive Compatible</strong>:</p>
<div class="definition">
<p><strong>Definition: Dominant Strategy Incentive Compatible - DSIC</strong></p>
<p>A mechanism is dominant strategy incentive compatible if truthfulness is a dominant strategy for each participant. That is, being truthful is a best response regardless of other players' actions.</p>
</div>
<div class="theorem">
<p><strong>Theorem: You Cannot Game Serial Dictatorship</strong></p>
<p>It is in every student's best interest to choose their favorite available dorm in their turn. Formally, we say that Serial Dictatorship is <strong>strategyproof</strong> or <strong>truthful</strong>.</p>
</div>
<div class="proof">
<p><strong>Proof:</strong></p>
<ul>
<li>Your room choice doesn't affect room availability before your turn.</li>
<li>When your turn arrives, your best action is choosing your favorite available room.</li>
</ul>
</div>
<p>Why does this prove that Serial Dictatorship is strategyproof? Until your turn comes, it is other students who are bidding, and there is nothing you can do to affect it. However, when comes your turn, you choose what you get, so you should choose the best thing for you.</p>
<div class="definition">
<p><strong>Definition: Pareto Optimality</strong></p>
<p>An assignment <span class="arithmatex">\( A \)</span> is Pareto optimal if, for any other assignment <span class="arithmatex">\( B \)</span>, there's at least one participant strictly preferring <span class="arithmatex">\( A \)</span> over <span class="arithmatex">\( B \)</span>.</p>
</div>
<div class="theorem">
<p><strong>Theorem: You Cannot Make Everyone Happier Without Making Someone Sadder</strong></p>
<p>Serial Dictatorship assignments are Pareto Optimal.</p>
</div>
<div class="proof">
<p><strong>Proof:</strong></p>
<p>Assume, for the sake of contradiction, that a different assignment exists making everyone as happy or happier.</p>
<p>Consider the first student assigned differently: all better dorms are already assigned identically to students before them.</p>
<p>Thus, the first differing student gets a worse dorm and becomes less happyâ€”we have reached a contradiction.</p>
<p>Therefore, Serial Dictatorship is Pareto Optimal.</p>
</div>
<h2 id="additional-discussion">Additional Discussion</h2>
<p><strong>Why is truthfulness good?</strong> It prevents corruption and ensures fairness by removing any insider advantage.</p>
<p><strong>When is truthfulness important?</strong> When optimizing happiness, truthful inputs ensure correct objectives.</p>
<p><strong>When is relaxing truthfulness acceptable?</strong>  In contexts with social norms where truthfulness isn't expected (e.g., poker games), strategyproofness isn't crucial.</p>
<p><strong>Fairness/equity issues with Serial Dictatorship:</strong> Fairness depends on sorting order. Seniority or randomness provide fairness ex-ante but not necessarily ex-post.</p>
<p><strong>Is there any other flaws in Serial Dictatorship?</strong> A dictator's seemingly insignificant decision may have huge impact on other agents. For instance, by the time my turn arrive, only my 9th and 10th choices are available. Since I am almost indifferent between them, I break ties and take my 9th choice. However, it is possible that my 9th choice was in fact someone else's top choice and they <em>really</em> wanted it. This may be even worse if their 2nd-10th choices happen to be already taken.</p>
<h2 id="recap">Recap</h2>
<div class="summary">
<ul>
<li><strong>Definition: Mechanism.</strong> A mechanism meaning soliciting inputs, running an algorithm, and taking actions.</li>
<li><strong>Definition: Strategyproof/truthful.</strong> A mechanism is strategyproof/truthful is misreporting preferences can never make a participant better off.</li>
<li><strong>Defintion: Pareto-optimal.</strong> An assignment <span class="arithmatex">\( A \)</span> is Pareto-optimal if for any other assignment <span class="arithmatex">\( B \)</span>, there is a participan that (strictly) prefers <span class="arithmatex">\( A \)</span> over <span class="arithmatex">\( B \)</span>.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>
      
        <script src="../javascript/katex-init.js"></script>
      
    
  </body>
</html>